{"version":3,"sources":["services/persons.js","App.js","serviceWorker.js","index.js"],"names":["axios","get","then","response","data","newPerson","post","id","delete","updatedPerson","put","MessageHeader","message","messageStyle","isError","background","padding","margin","style","text","PhoneNumberList","persons","onRemove","map","person","key","name","number","onClick","e","personToRow","AddNumberForm","newName","newNumber","onSubmit","onNameChanged","onNumberChanged","onChange","value","type","FilterNumbersForm","App","useState","setPersons","setNewName","setNewNumber","filteredText","setFilteredText","setMessage","filteredPersons","filter","x","comparedName","toLowerCase","comparedPhoneNumber","includes","useEffect","personService","event","foundPerson","find","undefined","alert","preventDefault","createdPerson","newPersons","setTimeout","catch","error","window","confirm","updatePayload","console","log","target","personsNow","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.21035748.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api'\n\n\nconst getAll = () => {\n    const request = axios.get(`${baseUrl}/persons`)\n    return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(`${baseUrl}/persons`, newPerson)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    return axios.delete(`${baseUrl}/persons/${id}`)\n}\n\nconst update = (id, updatedPerson) => {\n    const request = axios.put(`${baseUrl}/persons/${id}`, updatedPerson)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, remove, update }","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\n\nconst personToRow = (person, onRemove) => (\n  <div>\n    {person.name}  {person.number} <button onClick={(e) => onRemove(person.id, person.name, e)}>Remove from contacts</button>\n  </div>\n)\n\nconst MessageHeader = ({ message }) => {\n  if (message === null) {\n    return null\n  } else {\n    const errorStyle = {\n      background: '#DC143C',\n      padding: '10px',\n      margin: '5px'\n    }\n\n    const successStyle = {\n      background: '#7FFF00',\n      padding: '10px',\n      margin: '5px'\n    }\n\n    const messageStyle = message.isError ? errorStyle : successStyle\n\n    return (\n      <div style={messageStyle}>\n        { message.text }\n      </div>\n    )\n  }\n}\n\nconst PhoneNumberList = ({ persons, onRemove }) => {\n  return (\n    <div>\n      { persons.map(person => <div key={person.name}>{personToRow(person, onRemove)}</div>) }\n    </div>\n  )\n}\n\nconst AddNumberForm = ({ newName, newNumber, onSubmit, onNameChanged, onNumberChanged}) => {\n  return (\n    <form onSubmit={onSubmit} >\n        <div>\n          name: \n          <input \n            onChange={onNameChanged}\n            value={newName}\n          />\n        </div>\n        <div>\n          number: \n          <input \n            onChange={onNumberChanged}\n            value={newNumber}\n          />\n        </div>\n        <div>\n          <button\n            type=\"submit\"\n          >\n            add\n          </button>\n        </div>\n      </form>\n  )\n}\n\nconst FilterNumbersForm = ({ onChange }) => {\n  return (\n    <div>\n      <div>Filter contacts with phone number or name:</div>\n      <input type=\"text\" onChange={onChange} />\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filteredText, setFilteredText ] = useState('')\n  const [ message, setMessage] = useState(null)\n\n  const onSubmitAddNumber = (event) => {\n    const foundPerson = persons.find( x => x.name.toLowerCase() === newName.toLowerCase())\n    // Check if already found\n    if (foundPerson !== undefined) {\n      const userConfirmation = window.confirm(`${newName} can already be found from the phonebook. Do you want to replace the old phone number (${foundPerson.number}) with a new one (${newNumber})?`)\n      if (userConfirmation) {\n        const updatePayload = { ...foundPerson, number: newNumber}\n        console.log(updatePayload)\n        personService.update(foundPerson.id, updatePayload)\n          .then(updatedPerson => {\n            const newPersons = persons.map((x) => x.id === updatedPerson.id ? updatedPerson : x)\n            setPersons(newPersons)\n\n            setMessage({ isError: false, text: `Updated ${updatedPerson.name}'s phone number to ${updatedPerson.number}` })\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n            // Reset the form\n            setNewName('')\n            setNewNumber('')\n          }).catch(error => {\n            setMessage({ isError: true, text: `Failed to update ${foundPerson.name}'s information!` })\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          })\n          \n      }\n      event.preventDefault()\n      return\n    }\n    // Check if either field is empty\n    if (newName === \"\" || newNumber === \"\") {\n      alert('Please fill out the form completely.')\n      event.preventDefault()\n      return\n    }\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    personService\n      .create(newPerson)\n      .then(createdPerson => {\n        const newPersons = [ ...persons, createdPerson]\n        setPersons(newPersons)\n        setMessage({ isError: false, text: `Added ${createdPerson.name}` })\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n      }).catch(error => {\n        setMessage({ isError: true, text: `Failed to create ${newPerson.name}!` })\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n      })\n    // Reset the form\n    setNewName('')\n    setNewNumber('')\n\n    event.preventDefault()\n  }\n\n  const onRemovePerson = (id, name, e) => {\n    const userConfirmation = window.confirm(`Remove ${name} from contacts?`)\n\n    if (!userConfirmation) {\n      return\n    }\n\n    personService\n      .remove(id)\n      .then(response => {\n        const personsNow = persons.filter((x) => x.id !== id)\n        setPersons(personsNow)\n        setMessage({ isError: false, text: `Removed ${name}` })\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n      }).catch(error => {\n        setMessage({ isError: true, text: `Failed to remove ${name} from contacts!`})\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n      })\n  }\n\n  const filteredPersons = persons.filter((x) => {\n    const comparedName = x.name.toLowerCase()\n    const comparedPhoneNumber = x.number.toLowerCase()\n    const filter = filteredText.toLowerCase()\n    return comparedName.includes(filter) || comparedPhoneNumber.includes(filter)\n  })\n\n  const refreshPhoneNumbersEffect = () => {\n    personService.getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  }\n\n  // Load phone number list initially\n  useEffect(refreshPhoneNumbersEffect, [])\n\n  return (\n    <div>\n      <h2>Add a contact</h2>\n      <MessageHeader message={message} />\n      <AddNumberForm\n        newName={newName}\n        newNumber={newNumber}\n        onSubmit={onSubmitAddNumber}\n        onNameChanged={(event) => { setNewName(event.target.value) }}\n        onNumberChanged={(event) => { setNewNumber(event.target.value) }}\n      />\n      <hr />\n      <h2>Filter contacts</h2>\n      <FilterNumbersForm onChange={(event) => setFilteredText(event.target.value)}/>\n      <h2>Contacts</h2>\n      <PhoneNumberList \n        persons={filteredPersons} \n        onRemove={onRemovePerson} \n      />\n    </div>\n  )\n\n}\n\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}